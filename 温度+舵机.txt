#include <MeMCore.h>

// 初始化温度传感器
MeTemperature temperatureSensor(PORT_1); // 假设温度传感器连接到PORT_3（A0）
MePort port(PORT_1);
Servo myservo1;  // 创建控制舵机的舵机对象

int16_t servo1pin = port.pin1(); // 将舵机连接到PORT_3的SLOT1

unsigned long startTime;  // 记录程序开始的时间

void setup() {
  // 初始化串口通信
  Serial.begin(9600);

  // 初始化舵机
  myservo1.attach(servo1pin);  // 将舵机连接到servo1pin

  // 记录程序开始的时间
  startTime = millis();
}

void loop() {
  // 获取当前时间
  unsigned long currentTime = millis();
  
  // 程序运行时间超过10秒则停止
  if (currentTime - startTime > 10000) {
    // 停止程序执行
    return;
  }

  // 读取温度值
  float temperature = temperatureSensor.temperature();

  // 输出温度值
  Serial.print("Temperature: ");
  Serial.print(temperature);
  Serial.println(" C");

  // 控制舵机并输出角度值
  myservo1.write(0);      // 设置舵机1的位置为0度
  Serial.println("Servo 1 Angle: 0 degrees");
  delay(2000);            // 等待2秒

  myservo1.write(45);    // 设置舵机1的位置为45度
  Serial.println("Servo 1 Angle: 180 degrees");
  delay(2000);            // 等待2秒
}